exports.ids=[1],exports.modules={28:function(t,e){t.exports={}},29:function(t,e,d){"use strict";d.r(e);var l=d(28),o=d.n(l);for(var n in l)"default"!==n&&function(t){d.d(e,t,(function(){return l[t]}))}(n);e.default=o.a},31:function(t,e){t.exports={}},32:function(t,e){t.exports={}},33:function(t,e,d){"use strict";var l={props:{text:{},multiple:{type:Boolean,default:!1}},data:()=>({dropFiles:[],isLoading:!1}),name:"upload",methods:{async handleInput(data){let t=[];if(this.isLoading=!0,this.multiple)for(let i=0;i<data.length;i++){let e=await this.beforeUpload(data[i]);t.push(e)}else{let e=await this.beforeUpload(data);t.push(e)}this.$emit("done",t),this.dropFiles=[],this.isLoading=!1},async beforeUpload(t){let e=new FormData;return e.append("path",t),e.append("title",t.name),await this.$axios.$post("/media/medias/",e)}}},o=d(1),n={name:"Avatar",components:{Upload:Object(o.a)(l,(function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("b-upload",{attrs:{multiple:t.multiple,"drag-drop":""},on:{input:t.handleInput},model:{value:t.dropFiles,callback:function(e){t.dropFiles=e},expression:"dropFiles"}},[d("div",{staticClass:"content has-text-centered"},[d("p",[d("b-icon",{attrs:{icon:"cloud-upload",size:"is-large"}})],1),t._v(" "),t.text?d("p",[t._v(t._s(t.text))]):t._e()]),t._v(" "),d("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading,"can-cancel":!0},on:{"update:active":function(e){t.isLoading=e}}})],1)}),[],!1,null,null,"0717a939").exports},props:{canUpdate:{type:Boolean,default:!1},value:{default:null,type:Object},name:{default:null},icon:{default:"account-circle-outline",type:String},size:{default:"thumb_247_247"}},data(){return{data:this.value,isUpdating:!1}},methods:{handleUpload(t){t.length&&(this.data=t[0],this.isUpdating=!1)},cleanURI:t=>t?t.split("?")[0].split("#")[0]:null,avatarName(t,e){let d=t.match(/\b(\w)/g);return e?d.join("").substr(0,e):d.join("")}},watch:{data(){this.$emit("input",this.data)},value(){this.data=this.value}}};var r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("div",{staticClass:"image avatar relative",class:{initials:!(t.isUpdating||t.data&&t.data.sizes)}},[t.isUpdating?d("Upload",{staticClass:"upload",on:{done:t.handleUpload}}):t.data&&t.data.sizes?d("img",{staticClass:"is-round",attrs:{src:t.cleanURI(t.data.sizes[t.size]?t.data.sizes[t.size]:t.data.path),alt:""}}):t.name?d("span",[t._v(t._s(t.avatarName(t.name,2)))]):d("b-icon",{attrs:{icon:t.icon}}),t._ssrNode(" "),t.canUpdate?t._ssrNode('<div class="medal">',"</div>",[d("b-icon",{attrs:{size:"is-small",icon:t.isUpdating?"close":"upload"}})],1):t._e(),t._ssrNode(" "+(t.canUpdate&&t.data?'<div class="delete"></div>':"\x3c!----\x3e"))],2)}),[],!1,(function(t){var e=d(29);e.__inject__&&e.__inject__(t)}),null,"04e61ede");e.a=r.exports},35:function(t,e,d){"use strict";d.r(e);var l=d(31),o=d.n(l);for(var n in l)"default"!==n&&function(t){d.d(e,t,(function(){return l[t]}))}(n);e.default=o.a},36:function(t,e,d){"use strict";d.r(e);var l=d(32),o=d.n(l);for(var n in l)"default"!==n&&function(t){d.d(e,t,(function(){return l[t]}))}(n);e.default=o.a},37:function(t,e,d){"use strict";d.r(e);var l=d(33),o=d(27),n={name:"SheetForm",props:{value:{default:()=>({title:null,description:null,rows:[]})}},data(){return{data:this.value}},methods:{addRow(){this.data.rows.push({label:null,value:null})}},watch:{value:{deep:!0,handler:function(){this.data=this.value}},data:{deep:!0,handler:function(){this.$emit("input",this.data)}}}},r=d(1);var c=Object(r.a)(n,(function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("section",[d("b-field",[d("ce",{staticClass:"title",attrs:{elm:"h1",placeholder:"Sheet title"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),t._ssrNode(" "),d("b-field",{attrs:{label:"Description"}},[d("editor",{model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1),t._ssrNode(" "),t._ssrNode('<div class="level is-mobile">',"</div>",[t._ssrNode('<div class="level-left"><h4 class="title is-6">Rows</h4></div> '),t._ssrNode('<div class="level-right">',"</div>",[t._ssrNode('<div class="button">',"</div>",[d("b-icon",{attrs:{icon:"plus"}}),t._ssrNode(" <span>Add</span>")],2)])],2),t._ssrNode(" "),t._l(t.data.rows,(function(e,i){return t._ssrNode('<div class="data-elm">',"</div>",[t._ssrNode('<div class="media">',"</div>",[t._ssrNode('<div class="media-content">',"</div>",[d("b-field",{attrs:{"label-position":"on-border",label:"Label"}},[d("editor",{attrs:{value:e.label},on:{input:function(t){e.label=t}}})],1)],1),t._ssrNode(' <div class="media-right"><div class="delete"></div></div>')],2),t._ssrNode(" "),d("b-field",{attrs:{"label-position":"on-border",label:"Value"}},[d("editor",{attrs:{value:e.value},on:{input:function(t){e.value=t}}})],1)],2)}))],2)}),[],!1,(function(t){var e=d(35);e.__inject__&&e.__inject__(t)}),null,"42e46a8a").exports;const v={title:"{Name} Cheat Sheet",description:"<i>This is description</i>",sheets:[],settings:{},taxonomies:[],user:null,meta:{}},h={title:null,description:null,rows:[]};var _={name:"HomePage",components:{SheetForm:c,Avatar:l.a},async fetch(){this.$route.params.slug&&"editor"!==this.$route.params.slug?this.data=await this.$api.post.get(this.$route.params.slug):this.updating=!0,null===this.data.post_terms&&(this.data.post_terms=[]),null===this.data.meta&&(this.data.meta={sheets:[]})},head(){return{script:[],title:"editor"===this.$route.params.slug?"Editor":this.data.title}},data:()=>({data:v,active:!1,activeSheet:null,textBar:!1,taxonomy:{results:[]},updating:!1}),methods:{addSheet(){this.data.meta.sheets.push({id:this.generateId(),...Object(o.cloneDeep)(h)}),this.activeSheet=this.data.meta.sheets[this.data.meta.sheets.length-1],this.active=!0},updateSheet(t){this.activeSheet=this.data.meta.sheets[t],this.active=!0},handleUpdate(){this.updating?this.save():this.updating=!0},async save(){let data=Object(o.cloneDeep)(this.data);data.options.media=data.options.media?data.options.media.id:void 0,data.post_terms=data.post_terms?data.post_terms.map(t=>t.id):[],this.updating=!1},getQuerySet:Object(o.debounce)((function(text){this.$api.term_taxonomy.list({search:text}).then(t=>{this.taxonomy=t})}),500),async onAdd(t){if("string"==typeof t&&t.length>3){let e=await this.$axios.$post("/general/hash-tags/",{title:t});e.id&&(this.data.taxonomies[this.data.taxonomies.indexOf(t)]=e,this.taxonomy.results.push(e))}},beforeAdding(t){return-1===this.data.post_terms.map(t=>t.id).indexOf(t.id)},getTagQuerySet:Object(o.debounce)((function(text){this.$api.pub_taxonomy.list("/general/hash-tags/",{search:text}).then(t=>{this.taxonomy=t})}),500)}};var m=Object(r.a)(_,(function(){var t=this,e=t.$createElement,d=t._self._c||e;return d("div",[t._ssrNode('<div class="hero has-text-centered is-light" style="border-bottom: 1px solid #DDD;">',"</div>",[t._ssrNode('<div class="hero-body">',"</div>",[t._ssrNode('<div class="container small">',"</div>",[d("n-link",{staticClass:"button is-text",attrs:{to:"/"}},[d("b-icon",{attrs:{icon:"chevron-left"}}),t._v(" "),d("span",[t._v("Back to home")])],1),t._ssrNode(" "),t.updating||t.data.media?d("avatar",{staticClass:"is-96x96",staticStyle:{margin:"1rem auto"},attrs:{"can-update":t.updating},model:{value:t.data.media,callback:function(e){t.$set(t.data,"media",e)},expression:"data.media"}}):t._e(),t._ssrNode(" "),d("ce",{staticClass:"title is-1",attrs:{elm:"h1",editable:t.updating,placeholder:"Title"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),t._ssrNode(" "+(t.updating?"<editor"+t._ssrAttr("value",t.data.description)+' placeholder="Description"></editor>':'<div class="subtitle">'+t._s(t.data.description)+"</div>")+" "),t.updating?d("b-field",[d("b-taginput",{attrs:{data:t.taxonomy.results,autocomplete:"","allow-new":!0,field:"title",icon:"label",placeholder:"Add Tag","before-adding":t.beforeAdding},on:{add:t.onAdd,typing:t.getTagQuerySet},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.option.title))]}}],null,!1,3111879828),model:{value:t.data.post_terms,callback:function(e){t.$set(t.data,"post_terms",e)},expression:"data['post_terms']"}},[t._v(" "),d("template",{slot:"empty"},[t._v("got zero result")])],2)],1):t._e(),t._ssrNode(" "),t.currentUser?t._ssrNode('<div class="button is-text">',"</div>",[d("b-icon",{attrs:{size:"is-small",icon:"pen"}})],1):t._e()],2)])]),t._ssrNode(" "),t.updating?t._ssrNode('<div class="hero">',"</div>",[t._ssrNode('<div class="hero-body has-text-centered">',"</div>",[t._ssrNode('<div class="button is-large">',"</div>",[d("b-icon",{attrs:{icon:"plus"}}),t._ssrNode(" <span>Add Sheet</span>")],2)])]):t._e(),t._ssrNode(" "),t._l(t.data.meta.sheets,(function(e,i){return e.description||e.rows&&e.rows.length?t._ssrNode('<div class="hero sheet-detail">',"</div>",[t._ssrNode('<div class="hero-body">',"</div>",[t._ssrNode('<div class="container small content">',"</div>",[t._ssrNode('<div class="media">',"</div>",[t._ssrNode('<div class="media-content"><div class="title">'+t._ssrEscape(t._s(e.title))+"</div></div> "),t.updating?t._ssrNode('<div class="media-right">',"</div>",[t._ssrNode("<div"+t._ssrClass("button is-text",{"is-active":t.activeSheet&&t.activeSheet.id===e.id})+">","</div>",[d("b-icon",{attrs:{size:"is-small",icon:"pen"}})],1)]):t._e()],2),t._ssrNode(" "+(e.description?'<div class="subtitle">'+t._s(e.description)+"</div>":"\x3c!----\x3e")+" "+t._ssrList(e.rows,(function(e,i){return'<div class="section"><div class="field">'+t._s(e.label)+"</div> <div>"+t._s(e.value)+"</div></div>"})))],2)]),t._ssrNode(" <hr>")],2):t._e()})),t._ssrNode(" "),t.data.related&&t.data.related.length>1?t._ssrNode('<div class="hero">',"</div>",[t._ssrNode('<div class="hero-body">',"</div>",[t._ssrNode('<div class="container small">',"</div>",[t._ssrNode('<div class="card">',"</div>",[t._ssrNode('<div class="card-header"><div class="card-header-title">Related</div></div> '),t._ssrNode('<div class="card-content">',"</div>",t._l(t.data.related,(function(e){return e.id!==t.data.id?t._ssrNode('<div class="media">',"</div>",[t._ssrNode('<div class="media-left">',"</div>",[d("avatar",{staticClass:"is-24x24",attrs:{value:e.media}})],1),t._ssrNode(" "),t._ssrNode('<div class="media-content">',"</div>",[t._ssrNode("<h3>","</h3>",[d("n-link",{attrs:{to:"/"+e.slug}},[t._v(t._s(e.title))])],1)])],2):t._e()})),0)],2)])])]):t._e(),t._ssrNode(" "),d("transition",[t.active?d("div",{staticClass:"drawer"},[d("div",{staticClass:"hero"},[d("div",{staticClass:"hero-body"},[d("div",{staticClass:"container"},[d("div",{staticClass:"level"},[d("div",{staticClass:"level-left widget_title"},[t._v("Add Sheet")]),t._v(" "),d("div",{staticClass:"level-right"},[d("button",{staticClass:"delete",on:{click:function(e){t.active=!1}}})])]),t._v(" "),d("sheet-form",{model:{value:t.activeSheet,callback:function(e){t.activeSheet=e},expression:"activeSheet"}})],1)])])]):t._e()]),t._ssrNode(' <div class="has-text-centered"><div class="button"><span>Update</span></div></div>')],2)}),[],!1,(function(t){var e=d(36);e.__inject__&&e.__inject__(t)}),null,"39a48b84");e.default=m.exports}};